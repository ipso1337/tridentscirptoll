-- Arizona Live Watermark Script
-- Provides cursor-following text and single-row info panel

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Variables
local watermarkEnabled = false
local crosshairLabel = nil
local infoPanelFrame = nil
local pingLabel = nil
local fpsLabel = nil
local updateConnection = nil
local cursorFollowConnection = nil

-- FPS Counter
local frameCount = 0
local lastTime = tick()
local currentFPS = 60

-- Function to get ping
local function getPing()
    local ping = Stats.Network.ServerStatsItem["Data Ping"]:GetValueString()
    return ping:match("(%d+)") or "0"
end

-- Function to calculate FPS
local function updateFPS()
    frameCount = frameCount + 1
    local currentTime = tick()
    
    if currentTime - lastTime >= 1 then
        currentFPS = frameCount
        frameCount = 0
        lastTime = currentTime
    end
end

-- Function to update crosshair text position
local function updateCrosshairPosition()
    if not crosshairLabel or not watermarkEnabled then return end
    
    if UserInputService.MouseBehavior == Enum.MouseBehavior.Default then
        -- Mouse is unlocked, follow cursor
        local mouseLocation = UserInputService:GetMouseLocation()
        local screenSize = workspace.CurrentCamera.ViewportSize
        
        -- Convert mouse position to UDim2
        local xScale = mouseLocation.X / screenSize.X
        local yScale = mouseLocation.Y / screenSize.Y
        
        -- Position text below cursor with offset
        crosshairLabel.Position = UDim2.new(xScale, -100, yScale, 25)
    else
        -- Mouse is locked, center position (below crosshair)
        crosshairLabel.Position = UDim2.new(0.5, -100, 0.5, 20)
    end
end

-- Function to create crosshair text
local function createCrosshairText()
    if crosshairLabel then return end
    
    -- Create ScreenGui for crosshair
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ArizonaWatermark"
    screenGui.Parent = playerGui
    screenGui.ResetOnSpawn = false
    screenGui.DisplayOrder = 999
    
    -- Create crosshair label
    crosshairLabel = Instance.new("TextLabel")
    crosshairLabel.Name = "CrosshairText"
    crosshairLabel.Parent = screenGui
    crosshairLabel.BackgroundTransparency = 1
    crosshairLabel.Size = UDim2.new(0, 200, 0, 30)
    crosshairLabel.Position = UDim2.new(0.5, -100, 0.5, 20) -- Default center position
    crosshairLabel.Text = "Arizona Live"
    crosshairLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    crosshairLabel.TextScaled = false
    crosshairLabel.TextSize = 18
    crosshairLabel.TextStrokeTransparency = 0
    crosshairLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    crosshairLabel.Font = Enum.Font.GothamBold
    crosshairLabel.TextXAlignment = Enum.TextXAlignment.Center
    crosshairLabel.TextYAlignment = Enum.TextYAlignment.Center
    
    -- Add glow effect
    local textGlow = Instance.new("TextLabel")
    textGlow.Name = "Glow"
    textGlow.Parent = crosshairLabel
    textGlow.BackgroundTransparency = 1
    textGlow.Size = UDim2.new(1, 0, 1, 0)
    textGlow.Position = UDim2.new(0, 0, 0, 0)
    textGlow.Text = crosshairLabel.Text
    textGlow.TextColor3 = Color3.fromRGB(0, 150, 255)
    textGlow.TextScaled = false
    textGlow.TextSize = 18
    textGlow.TextStrokeTransparency = 0.8
    textGlow.TextStrokeColor3 = Color3.fromRGB(0, 150, 255)
    textGlow.Font = Enum.Font.GothamBold
    textGlow.TextXAlignment = Enum.TextXAlignment.Center
    textGlow.TextYAlignment = Enum.TextYAlignment.Center
    textGlow.ZIndex = crosshairLabel.ZIndex - 1
    
    -- Animate glow effect
    local glowTween = TweenService:Create(textGlow, 
        TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
        {TextStrokeTransparency = 0.3}
    )
    glowTween:Play()
    
    -- Start cursor following
    cursorFollowConnection = RunService.Heartbeat:Connect(updateCrosshairPosition)
end

-- Function to create info panel (single row)
local function createInfoPanel()
    if infoPanelFrame then return end
    
    -- Create ScreenGui for info panel if doesn't exist
    local screenGui = playerGui:FindFirstChild("ArizonaWatermark")
    if not screenGui then
        screenGui = Instance.new("ScreenGui")
        screenGui.Name = "ArizonaWatermark"
        screenGui.Parent = playerGui
        screenGui.ResetOnSpawn = false
        screenGui.DisplayOrder = 999
    end
    
    -- Create main frame (single row)
    infoPanelFrame = Instance.new("Frame")
    infoPanelFrame.Name = "InfoPanel"
    infoPanelFrame.Parent = screenGui
    infoPanelFrame.Size = UDim2.new(0, 300, 0, 40) -- Wider but shorter for single row
    infoPanelFrame.Position = UDim2.new(0.5, -150, 0, 20) -- Top center
    infoPanelFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    infoPanelFrame.BorderSizePixel = 0
    infoPanelFrame.BackgroundTransparency = 0.2
    
    -- Add corner radius
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = infoPanelFrame
    
    -- Add border glow
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(0, 150, 255)
    stroke.Thickness = 2
    stroke.Transparency = 0.5
    stroke.Parent = infoPanelFrame
    
    -- Add gradient
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 35)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 15))
    }
    gradient.Rotation = 45
    gradient.Parent = infoPanelFrame
    
    -- Title label (left side)
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Parent = infoPanelFrame
    titleLabel.Size = UDim2.new(0, 120, 1, 0) -- Fixed width for title
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "Arizona Live"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextScaled = false
    titleLabel.TextSize = 16
    titleLabel.TextStrokeTransparency = 0
    titleLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.TextYAlignment = Enum.TextYAlignment.Center
    
    -- Vertical divider
    local divider = Instance.new("Frame")
    divider.Name = "Divider"
    divider.Parent = infoPanelFrame
    divider.Size = UDim2.new(0, 2, 0, 20)
    divider.Position = UDim2.new(0, 140, 0.5, -10)
    divider.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    divider.BorderSizePixel = 0
    divider.BackgroundTransparency = 0.3
    
    -- Ping label (center)
    pingLabel = Instance.new("TextLabel")
    pingLabel.Name = "Ping"
    pingLabel.Parent = infoPanelFrame
    pingLabel.Size = UDim2.new(0, 70, 1, 0)
    pingLabel.Position = UDim2.new(0, 150, 0, 0)
    pingLabel.BackgroundTransparency = 1
    pingLabel.Text = "0ms"
    pingLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    pingLabel.TextScaled = false
    pingLabel.TextSize = 14
    pingLabel.TextStrokeTransparency = 0
    pingLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    pingLabel.Font = Enum.Font.Gotham
    pingLabel.TextXAlignment = Enum.TextXAlignment.Center
    pingLabel.TextYAlignment = Enum.TextYAlignment.Center
    
    -- Vertical divider 2
    local divider2 = Instance.new("Frame")
    divider2.Name = "Divider2"
    divider2.Parent = infoPanelFrame
    divider2.Size = UDim2.new(0, 2, 0, 20)
    divider2.Position = UDim2.new(0, 230, 0.5, -10)
    divider2.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    divider2.BorderSizePixel = 0
    divider2.BackgroundTransparency = 0.3
    
    -- FPS label (right side)
    fpsLabel = Instance.new("TextLabel")
    fpsLabel.Name = "FPS"
    fpsLabel.Parent = infoPanelFrame
    fpsLabel.Size = UDim2.new(0, 60, 1, 0)
    fpsLabel.Position = UDim2.new(0, 240, 0, 0)
    fpsLabel.BackgroundTransparency = 1
    fpsLabel.Text = "60 FPS"
    fpsLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    fpsLabel.TextScaled = false
    fpsLabel.TextSize = 14
    fpsLabel.TextStrokeTransparency = 0
    fpsLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    fpsLabel.Font = Enum.Font.Gotham
    fpsLabel.TextXAlignment = Enum.TextXAlignment.Center
    fpsLabel.TextYAlignment = Enum.TextYAlignment.Center
    
    -- Animate panel entrance
    infoPanelFrame.Position = UDim2.new(0.5, -150, 0, -50)
    local enterTween = TweenService:Create(infoPanelFrame,
        TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
        {Position = UDim2.new(0.5, -150, 0, 20)}
    )
    enterTween:Play()
end

-- Function to update stats
local function updateStats()
    if not watermarkEnabled then return end
    
    updateFPS()
    
    if pingLabel then
        local ping = getPing()
        pingLabel.Text = ping .. "ms"
        
        -- Color ping based on value
        local pingNum = tonumber(ping) or 0
        if pingNum <= 50 then
            pingLabel.TextColor3 = Color3.fromRGB(0, 255, 0) -- Green
        elseif pingNum <= 100 then
            pingLabel.TextColor3 = Color3.fromRGB(255, 255, 0) -- Yellow
        else
            pingLabel.TextColor3 = Color3.fromRGB(255, 0, 0) -- Red
        end
    end
    
    if fpsLabel then
        fpsLabel.Text = currentFPS .. " FPS"
        
        -- Color FPS based on value
        if currentFPS >= 60 then
            fpsLabel.TextColor3 = Color3.fromRGB(0, 255, 0) -- Green
        elseif currentFPS >= 30 then
            fpsLabel.TextColor3 = Color3.fromRGB(255, 255, 0) -- Yellow
        else
            fpsLabel.TextColor3 = Color3.fromRGB(255, 0, 0) -- Red
        end
    end
end

-- Global functions for control
_G.EnableWatermark = function()
    if watermarkEnabled then return end
    
    watermarkEnabled = true
    createCrosshairText()
    createInfoPanel()
    
    -- Start update loop
    updateConnection = RunService.Heartbeat:Connect(updateStats)
    
    print("Arizona Live Watermark enabled")
end

_G.DisableWatermark = function()
    if not watermarkEnabled then return end
    
    watermarkEnabled = false
    
    -- Disconnect update loops
    if updateConnection then
        updateConnection:Disconnect()
        updateConnection = nil
    end
    
    if cursorFollowConnection then
        cursorFollowConnection:Disconnect()
        cursorFollowConnection = nil
    end
    
    -- Remove GUI elements
    local screenGui = playerGui:FindFirstChild("ArizonaWatermark")
    if screenGui then
        screenGui:Destroy()
    end
    
    crosshairLabel = nil
    infoPanelFrame = nil
    pingLabel = nil
    fpsLabel = nil
    
    print("Arizona Live Watermark disabled")
end

_G.CleanupWatermark = function()
    _G.DisableWatermark()
    
    -- Clean up global functions
    _G.EnableWatermark = nil
    _G.DisableWatermark = nil
    _G.CleanupWatermark = nil
    
    print("Arizona Live Watermark cleaned up")
end

print("Arizona Live Watermark script loaded")
