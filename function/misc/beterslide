-- BeterSlide System Configuration
local BeterSlideConfig = {
    speed = 55,                    -- –°–∫–æ—Ä–æ—Å—Ç—å —Å–ª–∞–π–¥–∞ (55-70)
    forcesprint = false,           -- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø—Ä–∏–Ω—Ç
    enabled = false,               -- –í–∫–ª—é—á–µ–Ω –ª–∏ BeterSlide
    sprintSpeed = 18,              -- –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—ã—á–Ω–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞
    slideUpForce = 6.5,            -- –°–∏–ª–∞ –ø–æ–¥—ä–µ–º–∞ –ø—Ä–∏ —Å–ª–∞–π–¥–µ
    slideDownForce = -7,           -- –°–∏–ª–∞ –æ–ø—É—Å–∫–∞–Ω–∏—è –ø—Ä–∏ —Å–ª–∞–π–¥–µ
    slideTime = 0.85,              -- –í—Ä–µ–º—è —Å–ª–∞–π–¥–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    minSpeed = 17,                 -- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–ª–∞–π–¥–∞
    deceleration = 20              -- –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–º–µ–¥–ª–µ–Ω–∏—è
}

-- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local isSlideEnabled = false
local isForcesprintEnabled = false
local currentSpeed = BeterSlideConfig.speed
local slideTimer = 0
local slideConnection = nil

-- –°–µ—Ä–≤–∏—Å—ã
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
_G.EnableBeterSlide = nil
_G.DisableBeterSlide = nil
_G.CleanupBeterSlide = nil
_G.SetSlideSpeed = nil
_G.SetForcesprint = nil

-- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
local function IsKeyDown(keyCode)
    return UserInputService:IsKeyDown(keyCode)
end

local function GetMiddlePart()
    if LocalPlayer and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return LocalPlayer.Character.HumanoidRootPart
    end
    return nil
end

local function GetCameraDirection()
    local cameralook = Camera.CFrame.LookVector
    return Vector3.new(cameralook.X, 0, cameralook.Z)
end

local function GetMovementDirection()
    local cameralook = GetCameraDirection()
    local direction = Vector3.zero
    
    -- W - –≤–ø–µ—Ä–µ–¥
    if IsKeyDown(Enum.KeyCode.W) then
        direction = direction + cameralook
    end
    
    -- S - –Ω–∞–∑–∞–¥
    if IsKeyDown(Enum.KeyCode.S) then
        direction = direction - cameralook
    end
    
    -- D - –≤–ø—Ä–∞–≤–æ
    if IsKeyDown(Enum.KeyCode.D) then
        direction = direction + Vector3.new(-cameralook.Z, 0, cameralook.X)
    end
    
    -- A - –≤–ª–µ–≤–æ
    if IsKeyDown(Enum.KeyCode.A) then
        direction = direction + Vector3.new(cameralook.Z, 0, -cameralook.X)
    end
    
    if direction ~= Vector3.zero then
        direction = direction.Unit
    end
    
    return direction
end

-- –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ BeterSlide
local function BeterSlideLoop(delta)
    local middle = GetMiddlePart()
    if not middle then return end
    
    local direction = GetMovementDirection()
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏—é —Å–ª–∞–π–¥–∞ (C + LeftShift)
    local isSliding = isSlideEnabled and IsKeyDown(Enum.KeyCode.C) and IsKeyDown(Enum.KeyCode.LeftShift)
    
    if isSliding then
        -- –õ–æ–≥–∏–∫–∞ —Å–ª–∞–π–¥–∞
        currentSpeed = math.clamp(currentSpeed - delta * BeterSlideConfig.deceleration, BeterSlideConfig.minSpeed, BeterSlideConfig.speed)
        
        -- –ü–æ–¥—ä–µ–º –≤ –Ω–∞—á–∞–ª–µ —Å–ª–∞–π–¥–∞
        if slideTimer == 0 then
            middle.CFrame = middle.CFrame + Vector3.new(0, BeterSlideConfig.slideUpForce, 0)
        end
        
        -- –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å–ª–∞–π–¥–∞
        middle.AssemblyLinearVelocity = Vector3.new(
            direction.X * currentSpeed,
            slideTimer < BeterSlideConfig.slideTime and 0 or BeterSlideConfig.slideDownForce,
            direction.Z * currentSpeed
        )
        
        slideTimer = slideTimer + delta
    else
        -- –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞
        if isForcesprintEnabled and middle then
            middle.AssemblyLinearVelocity = Vector3.new(
                direction.X * BeterSlideConfig.sprintSpeed,
                middle.AssemblyLinearVelocity.Y,
                direction.Z * BeterSlideConfig.sprintSpeed
            )
        end
        
        -- –°–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–ª–∞–π–¥–∞
        currentSpeed = BeterSlideConfig.speed
        slideTimer = 0
    end
end

-- –§—É–Ω–∫—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∏—è BeterSlide
local function EnableBeterSlide()
    if slideConnection then
        return -- –£–∂–µ –≤–∫–ª—é—á–µ–Ω
    end
    
    -- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
    slideConnection = RunService.Heartbeat:Connect(BeterSlideLoop)
    
    print("‚úì BeterSlide enabled")
    print("üìã Controls:")
    print("   ‚Ä¢ Hold C + LeftShift to slide")
    print("   ‚Ä¢ Use WASD for direction")
    print("   ‚Ä¢ Current speed:", BeterSlideConfig.speed)
end

-- –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è BeterSlide
local function DisableBeterSlide()
    if slideConnection then
        slideConnection:Disconnect()
        slideConnection = nil
    end
    
    -- –°–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    currentSpeed = BeterSlideConfig.speed
    slideTimer = 0
    
    print("‚úó BeterSlide disabled")
end

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
local function CleanupBeterSlide()
    DisableBeterSlide()
    
    -- –û—á–∏—â–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    _G.EnableBeterSlide = nil
    _G.DisableBeterSlide = nil
    _G.CleanupBeterSlide = nil
    _G.SetSlideSpeed = nil
    _G.SetForcesprint = nil
    
    print("üßπ BeterSlide cleaned up")
end

-- –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
local function SetSlideSpeed(speed)
    BeterSlideConfig.speed = math.clamp(speed or 55, 55, 70)
    currentSpeed = BeterSlideConfig.speed
    
    print("üèÉ Slide speed set to:", BeterSlideConfig.speed)
end

-- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞
local function SetForcesprint(enabled)
    isForcesprintEnabled = enabled or false
    
    print("‚ö° Forcesprint set to:", isForcesprintEnabled)
end

-- –ù–∞–∑–Ω–∞—á–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
_G.EnableBeterSlide = EnableBeterSlide
_G.DisableBeterSlide = DisableBeterSlide
_G.CleanupBeterSlide = CleanupBeterSlide
_G.SetSlideSpeed = SetSlideSpeed
_G.SetForcesprint = SetForcesprint

print("üõπ BeterSlide System loaded successfully!")
print("üìã Available functions:")
print("   ‚Ä¢ _G.EnableBeterSlide()")
print("   ‚Ä¢ _G.DisableBeterSlide()")
print("   ‚Ä¢ _G.SetSlideSpeed(55-70)")
print("   ‚Ä¢ _G.SetForcesprint(boolean)")
print("   ‚Ä¢ _G.CleanupBeterSlide()")
print("")
print("üéÆ How to use:")
print("   1. Enable BeterSlide")
print("   2. Hold C + LeftShift while moving to slide")
print("   3. Use WASD for direction control")

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
-- EnableBeterSlide()
