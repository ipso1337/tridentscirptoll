-- BeterSlide System Configuration - Updated Logic
local bhop_enabled = false
local speed = 55
local forcesprint = false
local niga, wtf = speed, 0
local slideConnection = nil

-- –°–µ—Ä–≤–∏—Å—ã
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
_G.EnableBeterSlide = nil
_G.DisableBeterSlide = nil
_G.CleanupBeterSlide = nil
_G.SetSlideSpeed = nil
_G.SetForcesprint = nil

-- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
local function IsKeyDown(keyCode)
    return UserInputService:IsKeyDown(keyCode)
end

local function GetMiddlePart()
    if LocalPlayer and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return LocalPlayer.Character.HumanoidRootPart
    end
    return nil
end

-- –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ BeterSlide (—Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞)
local function BeterSlideLoop(delta)
    local middle = GetMiddlePart()
    
    if bhop_enabled and middle and IsKeyDown(Enum.KeyCode.C) and IsKeyDown(Enum.KeyCode.LeftShift) then
        local cameralook = Camera.CFrame.LookVector
        cameralook = Vector3.new(cameralook.X, 0, cameralook.Z)
        local direction = Vector3.zero
        
        direction = IsKeyDown(Enum.KeyCode.W) and direction + cameralook or direction
        direction = IsKeyDown(Enum.KeyCode.S) and direction - cameralook or direction
        direction = IsKeyDown(Enum.KeyCode.D) and direction + Vector3.new(-cameralook.Z, 0, cameralook.X) or direction
        direction = IsKeyDown(Enum.KeyCode.A) and direction + Vector3.new(cameralook.Z, 0, -cameralook.X) or direction
        
        if not (direction == Vector3.zero) then
            direction = direction.Unit
        end
        
        niga = math.clamp(niga - delta * 20, 17, speed)
        
        if wtf == 0 then
            middle.CFrame = middle.CFrame + Vector3.new(0, 6.5, 0)
        end
        
        middle.AssemblyLinearVelocity = Vector3.new(
            direction.X * niga,
            wtf < 0.85 and 0 or -7,
            direction.Z * niga
        )
        
        wtf = wtf + delta
    else
        if forcesprint and middle then
            local cameralook = Camera.CFrame.LookVector
            cameralook = Vector3.new(cameralook.X, 0, cameralook.Z)
            local direction = Vector3.zero
            
            direction = IsKeyDown(Enum.KeyCode.W) and direction + cameralook or direction
            direction = IsKeyDown(Enum.KeyCode.S) and direction - cameralook or direction
            direction = IsKeyDown(Enum.KeyCode.D) and direction + Vector3.new(-cameralook.Z, 0, cameralook.X) or direction
            direction = IsKeyDown(Enum.KeyCode.A) and direction + Vector3.new(cameralook.Z, 0, -cameralook.X) or direction
            
            if not (direction == Vector3.zero) then
                direction = direction.Unit
            end
            
            middle.AssemblyLinearVelocity = Vector3.new(
                direction.X * 18,
                middle.AssemblyLinearVelocity.Y,
                direction.Z * 18
            )
        end
        
        niga = speed
        wtf = 0
    end
end

-- –§—É–Ω–∫—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∏—è BeterSlide
local function EnableBeterSlide()
    if slideConnection then
        return -- –£–∂–µ –≤–∫–ª—é—á–µ–Ω
    end
    
    bhop_enabled = true
    niga = speed
    wtf = 0
    
    -- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª (–∞–Ω–∞–ª–æ–≥ cheat.utility.new_renderstepped)
    slideConnection = RunService.Heartbeat:Connect(BeterSlideLoop)
    
    print("‚úì BeterSlide enabled")
    print("üìã Controls:")
    print("   ‚Ä¢ Hold C + LeftShift to slide")
    print("   ‚Ä¢ Use WASD for direction")
    print("   ‚Ä¢ Current speed:", speed)
end

-- –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è BeterSlide
local function DisableBeterSlide()
    bhop_enabled = false
    
    if slideConnection then
        slideConnection:Disconnect()
        slideConnection = nil
    end
    
    -- –°–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    niga = speed
    wtf = 0
    
    print("‚úó BeterSlide disabled")
end

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
local function CleanupBeterSlide()
    DisableBeterSlide()
    
    -- –û—á–∏—â–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    _G.EnableBeterSlide = nil
    _G.DisableBeterSlide = nil
    _G.CleanupBeterSlide = nil
    _G.SetSlideSpeed = nil
    _G.SetForcesprint = nil
    
    print("üßπ BeterSlide cleaned up")
end

-- –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
local function SetSlideSpeed(newSpeed)
    speed = math.clamp(newSpeed or 55, 55, 70)
    niga = speed -- –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
    
    print("üèÉ Slide speed set to:", speed)
end

-- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞
local function SetForcesprint(enabled)
    forcesprint = enabled or false
    
    print("‚ö° Forcesprint set to:", forcesprint)
end

-- –ù–∞–∑–Ω–∞—á–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
_G.EnableBeterSlide = EnableBeterSlide
_G.DisableBeterSlide = DisableBeterSlide
_G.CleanupBeterSlide = CleanupBeterSlide
_G.SetSlideSpeed = SetSlideSpeed
_G.SetForcesprint = SetForcesprint

print("üõπ BeterSlide System loaded successfully!")
print("üìã Available functions:")
print("   ‚Ä¢ _G.EnableBeterSlide()")
print("   ‚Ä¢ _G.DisableBeterSlide()")
print("   ‚Ä¢ _G.SetSlideSpeed(55-70)")
print("   ‚Ä¢ _G.SetForcesprint(boolean)")
print("   ‚Ä¢ _G.CleanupBeterSlide()")
print("")
print("üéÆ How to use:")
print("   1. Enable BeterSlide")
print("   2. Hold C + LeftShift while moving to slide")
print("   3. Use WASD for direction control")

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
-- EnableBeterSlide()
